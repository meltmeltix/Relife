<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/tailwind.css">
    <link rel="stylesheet" type="text/css" href="/css/toastify.css">
    <link rel="icon" href="/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <title>Relife</title>

    <script>
        console.log("User type: <%- sessionType %>")
        console.log("User handle: <%- userHandle %>")
        userType = '<%- sessionType %>'
        loggedUser = '<%- userHandle %>'
    </script>
    <script defer src="/js/utils/libs/page.js"></script>
    <script defer src="/js/utils/libs/moment.min.js"></script>
    <script defer type="module" src="/js/feed/main.js"></script>
</head>

<body class="flex flex-col text-current">
    <!-- Logo -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
        <defs>
            <g id="logo" aria-label="Relife" style="font-size:174px;">
                <path d="M225.01 449.27q-18.87 0-29.61-12.46-10.57-12.47-10.57-34.99 0-24.25 10.05-36.54 10.04-12.3 28.4-12.3 16.8 0 26.33 10.4 9.7 10.38 9.7 31v7.96h-57.68q.35 18.88 6.76 27.54 6.58 8.48 19.05 8.48 9 0 15.24-3.63 6.4-3.81 9.52-8.49 1.22.52 2.26 2.08 1.03 1.56 1.03 3.8 0 3.47-3.29 7.46-3.29 3.98-10.04 6.92-6.76 2.77-17.15 2.77zm16.8-56.28q0-13.86-4.33-22.17-4.15-8.49-14.55-8.49-9.52 0-14.89 7.97-5.2 7.8-6.06 22.69zm28.4 54.55v-7.27h2.26q5.89 0 10.04-2.08 4.16-2.25 4.16-10.4v-92.82q0-7.62-4.33-9.7-4.16-2.08-9.87-2.08h-2.25v-7.27h32.73V427.8q0 8.14 4.16 10.4 4.15 2.07 10.04 2.07h2.25v7.27zm79.33-110.15q-4.16 0-7.1-2.42-2.78-2.43-2.78-8.31 0-6.07 2.78-8.32 2.94-2.42 7.1-2.42 3.98 0 6.92 2.42 2.95 2.25 2.95 8.32 0 5.88-2.95 8.3-2.94 2.43-6.92 2.43zm-23.9 110.15v-7.27h2.25q5.71 0 9.87-1.9 4.33-2.08 4.33-9.7v-54.9q0-7.63-4.33-9.7-4.16-2.08-9.87-2.08h-.52v-7.28h31v73.09q0 8.14 4.16 10.4 4.15 2.07 10.04 2.07h2.25v7.27zm56.11 0v-7.27H384q5.89 0 10.05-2.08 4.15-2.25 4.15-10.4v-64.94h-15.76v-8.14h15.76v-8.66q0-15.41 8.14-23.55 8.32-8.31 22.52-8.31 13.5 0 18.88 3.46 5.36 3.3 5.36 8.66 0 4.68-3.98 7.27-3.98 2.43-10.22 2.43 0-5.2-2.42-9.53-2.43-4.33-9-4.33-7.46 0-10.23 5.72-2.77 5.71-2.77 16.62v10.22h24.42v8.14h-24.42v64.95q0 8.14 4.16 10.4 4.16 2.07 10.04 2.07h6.59v7.27zm108.94 1.73q-18.88 0-29.62-12.46-10.56-12.47-10.56-34.99 0-24.25 10.04-36.54 10.05-12.3 28.4-12.3 16.8 0 26.33 10.4 9.7 10.38 9.7 31v7.96H467.3q.34 18.88 6.75 27.54 6.58 8.48 19.05 8.48 9 0 15.24-3.63 6.41-3.81 9.53-8.49 1.2.52 2.25 2.08 1.04 1.56 1.04 3.8 0 3.47-3.3 7.46-3.28 3.98-10.04 6.92-6.75 2.77-17.14 2.77zm16.8-56.28q0-13.86-4.33-22.17-4.16-8.49-14.55-8.49-9.53 0-14.9 7.97-5.2 7.8-6.06 22.69z" transform="translate(-52.69 -314.19)"/>
                <path d="M88.45 323.89s-2.89 11.91-2.68 20.85c.16 6.76 4.11 6.93 4.11 6.93s4.97-7.54 12.17-9.64c11.03-3.22 18.9 1.9 24.45 9.69 4.07 3.56 17.12-.22 17.12-.22s-9.9 24.05-30.1 24.05c-20.22 0-23.64-13.92-23.64-13.92s-12.22-3.4-12.22-22.85c0-11.92-2.66-14.9-2.66-14.9H52.69v9.88h6.93c1.96 0 3.98.63 6.06 1.9 2.08 1.16 3.12 3.93 3.12 8.31v83.66c0 4.38-.99 7.16-2.95 8.31a12.1 12.1 0 0 1-6.23 1.73h-6.93v9.87h61.66v-9.87h-5.55c-2.54 0-4.62-.58-6.23-1.73-1.62-1.15-2.43-3.93-2.43-8.31V394.2h10.22l19.23 37.76c3.34 6.46 8.14 10.68 14.37 12.64 6.24 1.96 14.43 2.94 24.6 2.94h7.1v-9.87h-1.05c-3 0-5.7-1.15-8.13-3.46-2.43-2.31-5.2-6.06-8.32-11.26l-20.09-34.47a42.74 42.74 0 0 0 11.78-5.71 28.7 28.7 0 0 0 8.83-10.4c2.31-4.26 3.47-9.63 3.47-16.1 0-10.04-3.82-17.95-11.44-23.72-7.62-5.78-20.43-8.66-38.44-8.66zm3.68 33c-.32-.4.79-2.27 4-3.62a12.4 12.4 0 0 1 4.85-.92c3.08.04 6.05.92 9.22 2.23l.13.05c3.7 1.48 5.5 2.46 8.42 3.35 2.44.73 4.35.89 5.88.88 1.47 0 2.38-.12 2.52.2.2.44-2.9 3.24-9.14 2.07-3.1-.56-5.79-1.66-9.09-3l-.12-.05c-3.17-1.24-5.49-2.16-8-2.44a13.1 13.1 0 0 0-3.91.1c-2.73.48-4.45 1.53-4.76 1.14z" transform="translate(-52.69 -314.19)"/>
            </g>
        </defs>
    </svg>

    <div class="drawer sm:drawer-open md:px-16 lg:px-44 xl:px-[18rem]">
        <input id="daisy-drawer" type="checkbox" class="drawer-toggle" aria-label="Drawer Toggle"/>

        <!-- Content -->
        <div class="drawer-content flex flex-col min-h-[100svh]">
            <!-- Top Bar -->
            <nav id="title-bar" class="navbar sticky top-0 bg-base-100 z-50 space-x-3"></nav>

            <!-- Status Modal -->
            <dialog id="status_modal" class="modal modal-bottom sm:modal-middle">
                <div class="modal-box flex flex-col align-bottom">
                    <form method="dialog">
                        <button
                            aria-label="Close post creation modal"
                            class="btn btn-ghost btn-square btn-sm absolute right-4 top-4">

                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x">
                                <path d="M18 6 6 18"/>
                                <path d="m6 6 12 12"/>
                            </svg>
                        </button>
                    </form>

                    <form action="/new/status" method="post" class="flex flex-col gap-2" enctype="multipart/form-data">
                        <input name="author" id="status_author" type="hidden">
                        <input name="thread" id="status_thread" type="hidden">
                        <input name="redirect" id="status_redirect" type="hidden">

                        <span class="text-xl w-full">New post</span>

                        <label class="form-control">
                            <textarea
                                name="body"
                                id="status_textarea"
                                class="textarea textarea-bordered textarea-md h-40 resize-none w-full"
                                maxlength="200"
                                placeholder="Something new to share?"></textarea>

                            <div class="label">
                                <span id="status_textarea_counter" class="label-text-alt">0/200</span>
                            </div>
                        </label>

                        <label class="form-control">
                            <input name="attachment" id="status_upload" type="file" accept="image/png, image/jpeg" class="file-input file-input-bordered w-full">
                            <div class="label">
                                <span id="status_textarea_counter" class="label-text-alt">Maximum size: 200kb</span>
                            </div>
                        </label>

                        <div class="flex flex-row justify-end">
                            <button id="status_submit" type="submit" disabled class="btn btn-primary rounded-xl w-28">Post</button>
                        </div>
                    </form>
                </div>
            </dialog>

            <!-- Content -->
            <div id="content-container" class="w-full h-full pb-20">
                <div id="spinner" class="flex flex-col h-full items-center justify-center">
                    <span class="loading loading-spinner loading-lg"></span>
                </div>
            </div>

            <!-- Mobile navigation -->
            <div
                id="bottom-navigation"
                class="sticky w-full flex flex-row justify-end sm:hidden"
            ></div>
        </div>

        <!-- Drawer -->
        <aside class="drawer-side">
            <nav class="flex flex-col w-64 h-full p-3 px-4 bg-base-100">
                <a href="/home" aria-label="Home" class="pt-2">
                    <svg class="h-7 fill-text-700 dark:fill-text-300" viewBox="0 0 472 135" xmlns="http://www.w3.org/2000/svg"><use href="#logo"/></svg>
                </a>

                <div class="h-2"></div>

                <div id="side-navigation" class="flex flex-col w-full h-full"></div>
            </nav>
        </aside>
    </div>

    <script src="/js/feed/util/functions/statusModal.js"></script>
</body>

</html>